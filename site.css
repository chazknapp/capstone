/* =========================
   GLOBAL THEME (True Dark)
   ========================= */
:root{
  --bg:#0d0d0d;        /* page background */
  --text:#e5e5e5;      /* primary text */
  --muted:#a3a3a3;     /* secondary text */
  --accent:#f5f5f5;    /* subtle highlight */
  --panel:#141414;     /* panels, bars, popups */
  --panel-2:#1a1a1a;   /* cards, drawers */
  --border:#2a2a2a;    /* hairlines */
}

*{ box-sizing:border-box }
html,body{
  height:100%;
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
  background:linear-gradient(180deg, var(--bg) 0%, #121212 100%);
  color:var(--text);
  line-height:1.6;
  text-align:left;
}

/* Alignment utilities */
.align-left{ text-align:left !important }
.align-center{ text-align:center !important }

/* Views */
.view{ display:none; height:100% }
.view.active{ display:block }

/* =========================
   HOME / LANDING
   ========================= */
.home-card{
  max-width: 880px;
  margin: 6rem auto;
  padding: 3rem 2rem;
  border-radius: 14px;
  background: var(--panel);
  border: 1px solid var(--border);
  box-shadow: 0 12px 40px rgba(0,0,0,.55);
  text-align: center;
}
.home-card h1{
  margin:0 0 1rem 0;
  font-size:2.6rem;
  font-weight:800;
  letter-spacing:.2px;
  color:var(--accent);
}
.home-card .intro{
  color:var(--muted);
  font-size:1.05rem;
  margin: 0 0 2rem 0;
  text-align: justify;
}
#home-hero{
  width:100%;
  border-radius:10px;
  border:1px solid var(--border);
  margin:1.5rem 0;
}
.btn-primary{
  background:var(--accent);
  color:#0d0d0d;
  border:none;
  border-radius:8px;
  padding:.85rem 1.4rem;
  font-weight:700;
  cursor:pointer;
  transition: transform .15s ease, opacity .15s ease;
}
.btn-primary:hover{ transform:translateY(-1px); opacity:.95 }

/* =========================
   TOP BAR (mode tabs, selectors)
   ========================= */
#topbar{
  position:fixed; top:0; left:0; right:0; height:70px;
  background:var(--panel);
  color:var(--text);
  border-bottom:1px solid var(--border);
  display:grid; grid-template-columns:1fr auto 1fr;
  align-items:center; gap:.75rem;
  padding:0 1.2rem; z-index:10;
}
.mode-tabs{ justify-self:start; display:flex; gap:.5rem }
.mode-tabs .tab{
  background:transparent; border:none; padding:.5rem .75rem;
  font-weight:700; letter-spacing:.2px;
  color:var(--muted); cursor:pointer;
  border-bottom:2px solid transparent;
}
.mode-tabs .tab:hover{ color:var(--text) }
.mode-tabs .tab.active{ color:var(--text); border-bottom-color:var(--accent) }

.controls{ display:flex; align-items:center; gap:.5rem }
.decade-controls{ justify-self:center; display:flex; align-items:center; gap:.5rem }
.decade-controls label{ font-size:.9rem; white-space:nowrap; color:var(--muted) }
.decade-controls .sep{ color:#7a7a7a; font-size:.9rem }
.tool-controls{ justify-self:end; display:flex; align-items:center; gap:.6rem }
.tool-controls label{ font-size:.9rem; color:var(--muted); white-space:nowrap }
#decadeB:disabled{ opacity:.4 }

/* Opacity slider (high-contrast for dark) */
#opacity{
  width:130px; appearance:none; background:transparent; height:18px; padding:0; margin:0;
}
#opacity::-webkit-slider-runnable-track{ height:3px; background:#d4d4d4; border-radius:2px }
#opacity::-moz-range-track{ height:3px; background:#d4d4d4; border-radius:2px }
#opacity::-webkit-slider-thumb{
  appearance:none; width:14px; height:14px; border-radius:50%;
  background:#ffffff; border:1px solid #ffffff; margin-top:-5.5px;
}
#opacity::-moz-range-thumb{ width:14px; height:14px; border-radius:50%; background:#ffffff; border:1px solid #ffffff }

/* =========================
   MAP CANVASES
   ========================= */
.map{ position:absolute; top:52px; bottom:52px; width:100% }
.compare{ position:absolute; top:52px; bottom:52px; left:0; right:0 }
#singleMap{ position:absolute; top:52px; bottom:52px; left:0; right:0 }

/* Force full-screen map containers */
.compare, #singleMap{
  position:fixed !important; top:0; left:0; right:0; bottom:0; z-index:0;
}
/* Click-safe gutters for bars */
.compare::before, #singleMap::before{ content:""; position:absolute; top:0; left:0; right:0; height:52px; pointer-events:none }
.compare::after,  #singleMap::after { content:""; position:absolute; bottom:0; left:0; right:0; height:52px; pointer-events:none }

/* Compare inner maps */
#compare .map, .compare .map{
  position:absolute !important; top:0; left:0; right:0; bottom:0;
  width:100% !important; height:100% !important;
}

/* Keep swipe handle on top */
.mapboxgl-compare{ z-index:5 }

/* =========================
   FOOTER NAV
   ========================= */
#bottombar{
  position:fixed; bottom:0; left:0; right:0; height:80px;
  background:var(--panel);
  color:var(--text);
  border-top:1px solid var(--border);
  display:flex; align-items:center; justify-content:center; gap:1rem;
  z-index:10; font-size:1.5rem; font-weight:900;
}
#bottombar button{
  background:transparent; border:none; color:var(--text);
  padding:.4rem .6rem; cursor:pointer;
}
#bottombar button:hover{ text-decoration:underline }

/* =========================
   DRAWER (Stats)
   ========================= */
.drawer{
  position:fixed; left:0; right:0; bottom:-45vh; height:45vh;
  background:var(--panel-2);
  color:var(--text);
  border-top:1px solid var(--border);
  transition:bottom .25s ease; z-index:20;
}
.drawer.open{ bottom:52px } /* match footer height */
.drawer-tabs{ display:flex; gap:.5rem; border-bottom:1px solid var(--border); padding:.5rem }
.drawer-tabs button{
  background:transparent; border:none; padding:.4rem .6rem; cursor:pointer;
  border-bottom:2px solid transparent; color:var(--muted); font-weight:700;
}
.drawer-tabs button:hover{ color:var(--text) }
.drawer-tabs button.active{ border-bottom-color:var(--accent); color:var(--text) }
.drawer .drawer-body{ padding:.75rem; overflow:auto; height:calc(45vh - 72px); overflow-x:auto }

/* Panes */
.pane{ display:none }
.pane.active{ display:block }

/* =========================
   ABOUT & PROPOSAL CONTENT
   ========================= */
#aboutPane .about, #proposalPane .about{
  max-width: 1000px;
  margin: 10px auto;
  padding: 10px 24px 16px 24px;
  color: var(--text);
}
#aboutPane .about a, #proposalPane .about a{ color: var(--accent) }

/* =========================
   INSTRUCTIONS POPUP
   ========================= */
.instructions-popup{
  position:fixed; bottom:20px; left:20px; width:320px;
  background:var(--panel);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  box-shadow:0 10px 28px rgba(0,0,0,.55);
  padding:.9rem 1rem;
  font-size:.92rem; line-height:1.45;
  z-index:50; display:none; animation:fadeIn .35s ease;
}
.instructions-popup.show{ display:block }
.instructions-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:.45rem }
.instructions-header h3{ margin:0; font-size:1rem }
.close-btn{ background:transparent; border:none; font-size:1.25rem; cursor:pointer; color:var(--text) }
.instructions-popup ul{ padding-left:1.2rem; margin:0 }
.instructions-popup li{ margin-bottom:.42rem }
@keyframes fadeIn{ from{ opacity:0; transform:translateY(8px) } to{ opacity:1; transform:translateY(0) } }

/* =========================
   STATS GALLERY
   ========================= */
/* Centered gallery, 3 columns x 2 rows */
.cards.centered{ max-width:1200px; margin:0 auto; padding:0 .75rem }
.cards.six{
  display:grid;
  grid-template-columns:repeat(3, minmax(240px, 1fr));
  gap:14px 16px;
  align-items:start;
  justify-items:center;
}

/* Card + thumb */
.card{
  width:100%; max-width:360px;
  background:var(--panel-2);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:8px;
  padding:.5rem;
  cursor:pointer;
  min-height:100px;
  display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
  transition: background .15s ease;
}
.card:hover{ background:#202020 }
.card .thumb{
  width:100%; height:120px;
  background:#0f0f0f center/contain no-repeat;
  border:1px solid var(--border); border-radius:6px;
}
.card.table .thumb{
  display:flex; align-items:center; justify-content:center;
  background:#111; color:var(--text); font-weight:600; letter-spacing:.2px;
}
.card .label{ margin-top:.5rem; font-size:.85rem; color:var(--muted); text-align:center }

/* =========================
   LIGHTBOX
   ========================= */
.lb-wrap{ position:fixed; inset:0; background:rgba(0,0,0,.6); z-index:30; display:flex; align-items:center; justify-content:center }
.lb-body{ background:#101010; color:var(--text); border:1px solid var(--border); border-radius:12px; max-width:95vw; max-height:90vh; padding:10px; overflow:auto; box-shadow:0 16px 44px rgba(0,0,0,.6) }
.lb-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px }
.lb-header .lb-back, .lb-header .lb-close{
  background:#2a2a2a; color:#fff; border:none; border-radius:6px; padding:.38rem .6rem; cursor:pointer;
}
.lb-content{ display:flex; flex-direction:row; gap:1rem; align-items:flex-start; justify-content:center; margin-bottom:8px }
.lb-content .lb-media{ flex:1 1 65% }
.lb-content .lb-descbox{
  flex:1 1 35%;
  background:#141414; border:1px solid var(--border); border-radius:8px;
  padding:.75rem; font-size:.92rem; color:var(--text); line-height:1.45; overflow-y:auto; max-height:70vh;
}
.lb-caption{ font-weight:700; margin-bottom:6px }
.lb-strip{ display:flex; gap:6px; flex-wrap:wrap; justify-content:center }
.lb-thumb{
  width:90px; height:60px; border:1px solid var(--border); border-radius:6px;
  background:#0f0f0f center/cover no-repeat;
  display:flex; align-items:center; justify-content:center;
  font-size:.75rem; color:var(--text); cursor:pointer; opacity:.85;
}
.lb-thumb.active{ outline:2px solid var(--accent); opacity:1 }

/* =========================
   STAT DESCRIPTION STYLES
   ========================= */
.stat-desc{ text-align:left; color:var(--text) }
.stat-desc .desc-title{ margin:.25rem 0 .5rem; font-weight:800 }
.stat-desc .takeaway{ margin:.5rem 0 0; color:var(--muted) }
.stat-desc .bullets{ margin:.5rem 0; padding-left:1.1rem }
.center-title{ text-align:center }











