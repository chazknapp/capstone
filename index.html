<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tornado Shift — Mapbook</title>

  <!-- Esri ArcGIS JS API -->
  <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/light/main.css" />
  <script src="https://js.arcgis.com/4.29/"></script>

  <!-- Your site styles -->
  <link rel="stylesheet" href="site.css" />
  <style>
    /* Tabs left, controls right */
    #topbar{ display:flex; align-items:center; gap:.75rem; justify-content:space-between }
    .mode-tabs{ display:flex; gap:.5rem }
    .global-controls{ display:flex; align-items:center; gap:.6rem; margin-left:auto }
    .global-controls label{ font-size:.9rem; white-space:nowrap }
    .global-controls input[type="range"]{ width:140px }
    #decadeB:disabled { opacity:0.5 }
  </style>
</head>
<body>

  <!-- Landing / Home -->
  <section id="home" class="view active">
    <div class="home-card">
      <h1>Tornado Shift</h1>
      <p class="intro">
        A clean, interactive mapbook exploring how U.S. tornado activity has shifted.
        Browse kernel density (KDE), tessellation aggregation, and symbolized points by decade.
      </p>
      <img id="home-hero" alt="Hero" src="images/frontpage.png"/>
      <button id="btnExplore" class="btn-primary">Explore</button>
    </div>
  </section>

  <!-- Map View -->
  <section id="mapview" class="view">
    <!-- Header -->
    <header id="topbar">
      <!-- LEFT: map modes -->
      <nav class="mode-tabs">
        <button class="tab" data-mode="KDE">KDE</button>
        <button class="tab" data-mode="TES">Tessellation</button>
        <button class="tab" data-mode="PTS">Points</button>
        <button id="btnClear" class="btn-clear" type="button">Clear</button>
      </nav>

      <!-- CENTER: decades (A/B) -->
      <div class="decade-controls">
        <label>A
          <select id="decadeA"></select>
        </label>
        <span class="sep">↔</span>
        <label>B
          <select id="decadeB" disabled></select>
        </label>
      </div>

      <!-- RIGHT: tools -->
      <div class="tool-controls">
        <label>Opacity
          <input id="opacity" type="range" min="0" max="1" step="0.01" value="0.9">
        </label>
        <label><input id="chkSwipe" type="checkbox"> Swipe</label>
        <label><input id="chkCentroids" type="checkbox"> Centroids</label>
        <label><input id="chkCentroidPath" type="checkbox"> Path</label>
      </div>
    </header>


    <!-- Map Containers -->
    <div id="compare" class="compare" style="display:none">
      <div id="mapLeft" class="map"></div>
      <div id="mapRight" class="map"></div>
    </div>
    <div id="singleMap" class="map"></div>

    <!-- Footer -->
    <footer id="bottombar">
      <button id="btnAbout" class="link">About</button>
      <button id="btnStats" class="link">Stats</button>
      <button id="btnProposal" class="link">Proposal</button>
    </footer>

    <!-- Drawer -->
    <section id="drawer" class="drawer">
      <div class="drawer-tabs">
        <button data-pane="statsPane" class="active">Stats</button>
        <button data-pane="aboutPane">About</button>
        <button data-pane="proposalPane">Proposal</button>
      </div>
    
      <div class="drawer-body">
        <!-- STATS -->
        <div id="statsPane" class="pane active">
          <div class="cards one-line">
            <!-- 3 graphs -->
            <div class="card" data-type="graph" data-src="stats/graphs/tor_regression.png" data-caption="Counts by Decade & Region" data-key="counts_region"></div>
            <div class="card" data-type="graph" data-src="stats/graphs/tor_ef_decade.png" data-caption="EF Distribution by Decade" data-key="ef_decade"></div>
            <div class="card" data-type="graph" data-src="stats/graphs/tor_casualties.png" data-caption="Casualties Over Time" data-key="casualties"></div>
    
            <!-- 3 tables -->
            <div class="card" data-type="table" data-src="stats/tables/decade_summary.html" data-caption="Decade Summary (Table)" data-key="decade_summary"></div>
            <div class="card" data-type="table" data-src="stats/tables/regional_totals.html" data-caption="Regional Totals (Table)" data-key="regional_totals"></div>
            <div class="card" data-type="table" data-src="stats/tables/regression_summary.html" data-caption="Regression Summary (Table)" data-key="regression_summary"></div>
          </div>
        </div>
    
        <!-- ABOUT -->
        <div id="aboutPane" class="pane">
          <article class="about">
            <h2>About This Project</h2>
        
            <p>
              This project explores how tornado behavior across the United States has evolved since the mid-20th century. 
              By comparing data decade by decade, it looks at where tornadoes occur, how their frequency and strength have changed, 
              and how human impacts have shifted over time. The visual and data-driven approach helps reveal long-term patterns that 
              are often hidden in raw numbers.
            </p>
        
            <h3>Purpose</h3>
            <p>
              The idea for this project came from a curiosity about the changing geography of Tornado Alley. 
              Many reports claim that the country’s most active tornado corridor is moving east, but I wanted to test that idea using 
              real data rather than speculation. Using NOAA storm records and Esri analysis tools, I worked to create an evidence-based 
              story that connects historical data, environmental change, and population exposure into one clear picture.
            </p>
        
            <h3>Findings</h3>
            <p>
              The data show that tornado behavior has changed in measurable ways since the 1950s:
            </p>
            <ul>
              <li><strong>Activity is shifting eastward</strong> - Tornado counts have leveled off in the Great Plains but have increased sharply in the Southeast and Midwest.</li>
              <li><strong>Storms are generally weaker</strong> - The share of strong EF3+ tornadoes has declined across all regions, even as total counts have gone up.</li>
              <li><strong>Casualties are more concentrated</strong> - Deaths and injuries have dropped overall but remain higher in the Southeast, where dense populations, heavy tree cover, and nocturnal storms increase vulnerability.</li>
              <li><strong>Seasonality is broadening</strong> - The Plains show a small but noticeable increase in cool-season activity, meaning tornadoes are less limited to the spring months.</li>
            </ul>
        
            <h3>Conclusion</h3>
            <p>
              These trends show that the nation’s tornado risk is no longer confined to one central Alley, but instead covers a broader and shifting landscape of storms and impacts. 
              The Southeast now experiences the greatest human toll, while the traditional Plains corridor has become quieter but still plays an important role in the overall pattern. 
              Understanding this eastward transition, and the environmental and social factors driving it, is vital for future preparedness, forecasting, and awareness.
            </p>
          </article>
        </div>

    
        <!-- PROPOSAL -->
        <div id="proposalPane" class="pane">
          <article class="about">
            <p>Loading proposal…</p>
          </article>
        </div>
      </div>

  <button id="drawerClose" class="drawer-close">×</button>
</section>


  <!-- Scripts -->
  <script src="scripts/site.js"></script>
  <script src="scripts/app_esri_only.js"></script>
  <script src="scripts/stats_loader.js"></script>

  <!-- Fallback: Explore button -->
  <script>
    document.getElementById('btnExplore')?.addEventListener('click', async () => {
      try {
        document.getElementById('home').classList.remove('active');
        document.getElementById('mapview').classList.add('active');
        if (window.EsriApp?.init) await window.EsriApp.init();
      } catch (e) {
        console.error('Explore failed:', e);
        alert('Map failed to start: ' + (e?.message || e));
      }
    });

    // Disable Decade B unless swipe is checked
    const chkSwipe = document.getElementById('chkSwipe');
    const decadeB = document.getElementById('decadeB');
    chkSwipe?.addEventListener('change', () => {
      if (chkSwipe.checked) {
        decadeB.disabled = false;
      } else {
        decadeB.value = "";
        decadeB.disabled = true;
        if (window.EsriApp?.setDecadeB) window.EsriApp.setDecadeB(""); // clears B layer
      }
    });
  </script>
</body>
</html>







